"use strict";
var app_key="f72d7a27300e4b6d76d75dc707b045f8";
var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.pushSdk=function(){var r="4.0.1";var s="plog";var e="pro";var p=e==="pro"?"https://openapi.xiaoshentui.com":"http://wwwtest.xiaoshentui.com";var c=false;var l={};var d={userInfo:{avatarUrl:"",country:"",city:"",gender:"",language:"",nickName:"",province:""}};wx.request({url:"https://"+s+".xiaoshentui.com/config/app.json",header:{AldStat:"MiniApp-Stat"},method:"GET",success:function e(t){if(t.statusCode===200){if(t.data["push_v"]!=r){console.warn("小神推sdk已更新,为不影响正常使用,请去官网(http://www.xiaoshentui.com/)下载最新版本")}}}});function g(){if(!d.openid){return}wx.getSetting({success:function e(t){if(t.authSetting["scope.userInfo"]){wx.getUserInfo({success:function e(t){d.userInfo=t.userInfo;h(d,"setopenid","setopenid")}})}else{h(d,"setopenid","setopenid")}}})}var t={setOpenId:function e(t){if(t.length!==28){console.error("openId位数不对");return}d.openid=t;if(typeof t!=="string"||t.length!==28){console.error("openid格式或位数错误");return}g()},sentEvent:function e(t){if(t.eventId.length!=32){console.error("eventId位数不对");return}if(t.arg===undefined||t.arg===""){delete t.arg}else{if(o(t.arg)!=="Object"){console.error("arg属性应为空字符串或对象");return}}for(var n in t.arg){if(_typeof(t.arg[n])==="object"){console.error("value只能是字符串");return}}d.eventId=t.eventId;d.arg=t.arg;h(d,"tagEvent")},sendJsCode:function e(t){if(typeof t==="string"){d.jscode=t}wx.getSetting({success:function e(t){if(t.authSetting["scope.userInfo"]){wx.getUserInfo({success:function e(t){d.userInfo=t;h(d,"user_info","userinfo")}})}else{h(d,"user_info","userinfo")}}})}};function y(e,t,n){if(e[t]){var o=e[t];e[t]=function(e){n.call(this,e,t);return o.call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))}}else{e[t]=function(e){n.call(this,e,t)}}}function w(){var e=wx.getStorageSync("t_uuid");if(!e){e=""+Date.now()+Math.floor(Math.random()*1e7);wx.setStorageSync("t_uuid",e);wx.setStorageSync("ifo",1);d.ifo=1}else{d.ifo=0}return e}var f=function e(n,o,i){if(typeof arguments[1]==="undefined")o="GET";if(typeof arguments[2]==="undefined")i="d.html";if(JSON.stringify(n).length>=4e3){return}var a=0;var t=function t(){wx.request({url:"https://"+s+".xiaoshentui.com/"+i,data:n,header:{},method:o,success:function e(){},fail:function e(){if(a<2){a++;n["retryTimes"]=a;t()}}})};t()};function h(e,t,n){var o=w();var i=void 0;if(t=="app"&&n=="hide"){i=wx.getStorageSync("ifo");wx.setStorageSync("ifo",0)}var a={v:r,uu:o,ev:t,life:n,ak:app_key.replace(/(^\s*)|(\s*$)/g,""),pm:e.pm?e.pm:0,wvv:e.wvv?e.wvv:0,wsdk:e.wsdk?e.wsdk:0,sv:e.sv?e.sv:0,wv:e.wv?e.wv:0,nt:e.nt?e.nt:0,ww:e.ww?e.ww:0,wh:e.wh?e.wh:0,pr:e.pr?e.pr:0,pp:e.pp?e.pp:0,lat:e.lat?e.lat:0,lng:e.lng?e.lng:0,st:e.st||0,et:t=="app"&&n=="hide"?Date.now():0,ppx:e.ppx?e.ppx:0,ppy:e.ppy?e.ppy:0,data:t=="user_info"?e.userInfo:0,fid:t=="fpage"?e.fid:0,lang:e.lang?e.lang:0,wsr:t=="app"?e.appOptions:{},ifo:i?i:0,jscode:t!=="user_info"?0:e.jscode,ust:Date.now(),openid:e.openid?e.openid:0,user_info:e.userInfo?e.userInfo:0,eventid:e.eventId,arg:e.arg,ele:e.ele?e.ele:0};f(a,"GET","d.html")}function v(e){d.ppx=e.detail.target.offsetLeft;d.ppy=e.detail.target.offsetTop;d.fid=e.detail.formId;h(d,"fpage","clickform")}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e){if(this==null){throw new TypeError}var t=Object(this);var n=t.length>>>0;if(n===0){return-1}var o=0;if(arguments.length>1){o=Number(arguments[1]);if(o!=o){o=0}else if(o!=0&&o!=Infinity&&o!=-Infinity){o=(o>0||-1)*Math.floor(Math.abs(o))}}if(o>=n){return-1}var i=o>=0?o:Math.max(n-Math.abs(o),0);for(;i<n;i++){if(i in t&&t[i]===e){return i}}return-1}}function o(e){return Object.prototype.toString.call(e).slice(8,-1)}if(wx.xst){console.error("wx.xst can't be defined twice!")}else{Object.defineProperty(wx,"xst",{configurable:false,set:function e(){console.error("cant't rewrite wx.xst")},get:function e(){return t}})}function S(){var e=wx.getSystemInfoSync();var t={app_key:app_key,uuid:wx.getStorageSync("t_uuid"),os:e.model,device:e.brand};wx.request({url:p+"/inapp_push",method:"GET",header:{"content-type":"application/json"},data:t,success:function e(t){if(t.data.code==200){c=true;l=t.data.data;l["isShow"]=true}}})}function x(e){var n=this;var o=e.currentTarget.dataset;var i=l;var t=wx.getSystemInfoSync();var a={app_key:app_key,uuid:wx.getStorageSync("t_uuid"),os:t.model,device:t.brand,msg_key:o["msgkey"]?o["msgkey"]:""};if(o["msgkey"]){wx.request({url:p+"/inapp_click_count",method:"GET",header:{"content-type":"application/json"},data:a,success:function e(t){}})}if(o.type==1){wx.navigateTo({url:"/"+o["acdetail"],success:function e(){i["isShow"]=false;n.setData({onlineData:i})},fail:function e(t){wx.switchTab({url:"/"+o["acdetail"],success:function e(){i["isShow"]=false;n.setData({onlineData:i})}})}})}else if(o.type==3){wx.navigateToMiniProgram({appId:o["apd"],path:"/"+o["acdetail"],success:function e(t){i["isShow"]=false;n.setData({onlineData:i})}})}else if(o.type==4){i["isShow"]=false;n.setData({onlineData:i})}}function m(){var e=l;e["isShow"]=false;this.setData({onlineData:e})}try{var n=wx.getSystemInfoSync();d.pm=n.model;d.pr=n.pixelRatio;d.ww=n.screenWidth;d.wh=n.screenHeight;d.lang=n.language;d.wv=n.version;d.wvv=n.platform;d.wsdk=typeof n["SDKVersion"]==="undefined"?"1.0.0":n["SDKVersion"];d.sv=n.system}catch(e){}wx.getNetworkType({success:function e(t){d.nt=t.networkType}});return function(e,t){try{var n,o;t==="App"?n=e:o=e}catch(e){}function i(e){w();if(typeof e!="undefined"){d.appOptions=e;d.pp=e["path"]}else{d.appOptions={}}if(app_key){if(!wx.getStorageSync("t_appkey")){wx.setStorageSync("t_appkey",app_key)}}}function a(e){if(typeof e!="undefined"){d.appOptions=e}else{d.appOptions={}}S()}function r(){g();h(d,"app","hide")}function s(e){var t=this;d.st=Date.now();d.pp=this["__route__"];if(t.onShareAppMessage){var n=t.onShareAppMessage;var o;t.onShareAppMessage=function(e){if(e.from==="button"){o="button"}else{o="menu"}d.ele=o;h(d,"share");return n(e)}}setTimeout(function(){if(l["isShow"]&&c){t.setData({onlineTier:c,onlineData:l});if(!t.colseOneBox){y(t,"atDetails",x);y(t,"colseOneBox",m)}}},2e3)}function p(e){var t=this;if(typeof e!="undefined"){t.options=e}d.pp=t["__route__"];if(l["isShow"]){c=false;l={};this.setData({onlineTier:c,onlineData:l})}}var f=function e(t){y(t,"onLaunch",i);y(t,"onShow",a);y(t,"onHide",r);n?n(t):App(t)};var u=function e(t){y(t,"onShow",s);y(t,"onHide",p);y(t,"pushFormSubmit",v);o?o(t):Page(t)};return{App:f,Page:u}}}();